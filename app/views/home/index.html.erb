<% content_for :title do %>
  <title>Play Risk Online - WarSocial</title>
<% end %>

<% content_for :javascript_includes do %>
  <%= render "shared/game_js_includes" %>
<% end %>

<% if params[:signup] %>
   <%= render "shared/after_signup" %>
<% elsif current_user.blank? -%>
    <%= render "shared/signup_popup" %>
<% end %>

<div ng-controller="GameBoardCtrl" id="game-container">
  <div ng-controller="GameSeatsCtrl">
    <div class="game">

      <%= render "shared/game_board2" %>

    </div>
	
	<!--Chat&data sidebar
		
    <div class="sidebar">
      <div id="game-details">
        <div ng-cloak class="wrapper room" style="margin-left: 10px;"><div class="icon"><i class="icon-home icon-white"></i></div>{{game_name}}</div>
        <div ng-cloak class="wrapper wager"><div class="icon"><i class="icon-cog icon-white"></i></div>{{game_wager}}</div>
      </div>
      <div ng-controller="GameLogCtrl" id="log-window">
        <table style="width: 100%">
          <tbody>
          <tr ng-cloak ng-repeat="message in messages"
              ng-switch on="message.type">
            <td ng-switch-when="game_winner">
              <div><b><span ng-style="colorStyle(message.username)">{{message.username}}</span> is the winner!</b></div>
            </td>
            <td ng-switch-when="attack">
              <div><b><span ng-style="colorStyle(message.username)">{{message.username}}</span></b> {{message.verb}} {{message.vs}}, {{message.total}}, {{message.rolls}}</div>
            </td>
            <td ng-switch-when="turn_changed">
              <div class="divider"></div>
              <div><b><span ng-style="colorStyle(message.username)">{{message.username}}</span>'s turn</b></div>
            </td>
            <td ng-switch-default>
              <div><b>Game started!</b></div>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
      <div ng-controller="GameChatCtrl">
        <div id="chat-window">
          <table style="margin-left: 5px; margin-right: 5px;">
            <tbody>
            <tr ng-cloak ng-repeat="message in messages"
                ng-switch on="message.type">
              <td ng-switch-when="server" class="well well-small">
                <span style="color: green;">{{message.text}}</span>
              </td>
              <td ng-switch-default>
                <span ng-style="colorStyle(message.username)"><b>{{message.username}}</b></span>: {{message.text}}
              </td>
            </tr>
            </tbody>
          </table>
        </div>
        <% if user_signed_in? %>
          <form id="form-chat" ng-submit="addChatLine(entry)" autocomplete="off">
            <div class="label-over">
              <label for="entry">Type your message here...</label>
              <input ng-model="entry" id="entry" class="input" type="text" name="entry">
            </div>
          </form>
        <% end %>
      </div>
    </div>
	
	chat&data sidebar-->	
  </div>
</div>

